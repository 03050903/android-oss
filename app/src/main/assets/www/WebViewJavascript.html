<script language="JavaScript">
  HTMLFormElement.prototype._submit = HTMLFormElement.prototype.submit;
  HTMLFormElement.prototype.submit = androidInterceptSubmit;

  window.addEventListener('submit', function(e) {
    androidInterceptSubmit(e);
  }, true);

  function androidInterceptSubmit(e) {
    var form = e ? e.target : this,
      $form = $(form);

    WebViewJavascriptInterface.setFormContents($form.serialize(),
      form.attributes['method'] === undefined ? null : form.attributes['method'].value,
      form.attributes['enctype'] === undefined ? null : form.attributes['enctype'].value,
      $('meta[name="csrf-token"]').attr('content'));

    form._submit();
  }
</script>
